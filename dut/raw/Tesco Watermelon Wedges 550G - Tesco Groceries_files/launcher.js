!function mfe(){var nativeTrack=function(c50val,c75,fallbackFn){var s=window.s||{},trackVars="eVar3,eVar9,eVar43,eVar187,prop4,prop10,prop50,prop75";"function"==typeof s.clearVars&&s.clearVars(),s.trackingServerSecure="smetrics.tesco.com",s.trackingServer="smetrics.tesco.com",s.prop50=c50val,s.eVar187=s.eVar187||encodeURIComponent("object"==typeof navigator&&navigator.userAgent),s.linkTrackVars=s.linkTrackVars?s.linkTrackVars+","+trackVars:trackVars,"function"==typeof s.tl?s.tl(!0,"o","aitRollout"):fallbackFn&&fallbackFn(c50val,s,c75)},sendImagePixel=function(trafficVars,sObj,c75){var params=[],wlh=encodeURIComponent(window.location.href),wlp=encodeURIComponent(window.location.pathname),dt=encodeURIComponent(document.title).toLowerCase(),rsids="object"==typeof gtmDataLayer&&gtmDataLayer.get("dLPlatformFuncs")&&gtmDataLayer.get("dLPlatformFuncs").rsids&&gtmDataLayer.get("dLPlatformFuncs").rsids(),dt=(params.push("c6="+wlh+"&v43="+wlh+"&v3="+dt),("object"==typeof gtmDataLayer&&gtmDataLayer.get("dLPlatformFuncs")&&gtmDataLayer.get("dLPlatformFuncs").countryAA||"object"==typeof gtmDataLayer&&gtmDataLayer.get("platformData"))&&(dt=(gtmDataLayer.get("platformData").country||gtmDataLayer.get("dLPlatformFuncs").countryAA()).toUpperCase(),dt=/phones/i.test(wlp)?"phones":"UK"===dt?"ghs:UK":"ighs:"+dt,params.push("c10="+dt+"&v9="+dt)),params.push(("object"==typeof sObj&&sObj.pageName,encodeURIComponent(sObj.pageName))),params.push("c4="+wlp),params.push(trafficVars),params.push("c73=1"),params.push("c75="+(c75||"not-set")),params.push("v187="+(navigator&&navigator.userAgent?encodeURIComponent(navigator.userAgent):"not-set")),Math.round(999999999999*Math.random()+1999)),sObj=new XMLHttpRequest;sObj.open("GET","https://smetrics.tesco.com/b/ss/"+rsids+"/1/JS-static/s"+dt+"?AQB=1&ndh=1&pf=1&ce=UTF-8&mid=anonymous&g="+wlh+"&r="+encodeURIComponent(document.referrer)+"&"+params.join("&")+"&pe=lnk_o&pev2=aitRollout&j=1.6&v=N&k=Y&bw="+window.innerWidth+"&bh="+window.innerHeight+"&mcorgid=E4860C0F53CE56C40A490D45%40AdobeOrg&AQE=1"),sObj.send(),"object"==typeof _gtm&&_gtm.notify&&_gtm.notify("GTM: Adobe Image Pixel Fired")},callGA4=function(rolloutVariant,appName,uuid,consentMode,fVersion){var country=gtmDataLayer.get("country"),isBot=!uuid||"object"!=typeof localStorage||!navigator||!(!navigator||"string"!=typeof navigator.userAgent||!/bot|L(&|%20)P|Lighthouse|crawl|postman/i.test(navigator.userAgent)),uuid=uuid||Math.round(1e9*(Math.random()+1)).toString(16),isDebugMode=/ait_(debug|qa|dev)/i.test(document.cookie)||!!window.localStorage&&"function"==typeof window.localStorage.getItem&&!!window.localStorage.getItem("ait_qa")||!!window.localStorage.getItem("ait_dev")||!!window.localStorage.getItem("ait_debug"),uuid={send_to:"G-H653QXESTP",user_id:uuid,uuid:/g1\d1/i.test(consentMode)?uuid:"undefined",appName:appName,rollout:rolloutVariant,country:country,traffic_type:isDebugMode?"internal":isBot?"bot":"production",consentMode:consentMode,page_title:document&&document.title||"n/a",page_location:"object"==typeof window&&"object"==typeof window.location&&window.location.hostname+window.location.pathname||"n/a",fileVersion:fVersion||"n/a",ua:(navigator&&navigator.userAgent).replace(/\(KHTML, like Gecko\)/gi,"")||"n/a"};isDebugMode&&(uuid.debug_mode="true"),"function"==typeof gtag&&gtag("event","aitRollout",uuid)},sendErrors=function(errors,appName,uuid,consentMode,fVersion){var country=gtmDataLayer.get("country"),userID=uuid||Math.round(1e9*(Math.random()+1)).toString(16),isDebugMode=/ait_(debug|qa|dev)/i.test(document.cookie)||!!window.localStorage&&"function"==typeof window.localStorage.getItem&&!!window.localStorage.getItem("ait_qa")||!!window.localStorage.getItem("ait_dev")||!!window.localStorage.getItem("ait_debug"),gtagData={};errors.map(function(err){gtagData={send_to:"G-H653QXESTP",user_id:userID,uuid:/g1\d1/i.test(consentMode)?userID:"undefined",appName:appName,description:err.description,fatal:!!err.fatal,country:country,traffic_type:isDebugMode?"internal":"production",consentMode:consentMode,page_title:document&&document.title||"n/a",page_location:"object"==typeof window&&"object"==typeof window.location&&window.location.hostname+window.location.pathname||"n/a",fileVersion:fVersion||"n/a",ua:(navigator&&navigator.userAgent).replace(/\(KHTML, like Gecko\)/gi,"")||"n/a"},isDebugMode&&(gtagData.debug_mode="true"),"function"==typeof gtag&&gtag("event","exception",gtagData)})};function generateUUID(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,function(){var r=(d+101*Math.random())%16|0;return d=Math.floor(d/1.8),r.toString(16)})}function storeUUID(uuid){var suffix=location.hostname.split(".")&&location.hostname.split(".")[2]&&location.hostname.split(".")[2].toUpperCase(),suffix=/com/i.test(suffix)?"uk":suffix;"string"==typeof uuid&&uuid.length&&/(\w+-?)+/i.test(uuid)&&"string"==typeof document.cookie&&(document.cookie="_ait="+uuid+";path=/groceries;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/checkout;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/account;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",/uk/i.test(suffix)?(document.cookie="_ait="+uuid+";path=/clubcard;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/zones;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/clothing;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/recipes;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",document.cookie="_ait="+uuid+";path=/help;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;"):/hu/i.test(suffix)?document.cookie="_ait="+uuid+";path=/bevasarlas;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;":document.cookie="_ait="+uuid+";path=/online-club;domain="+location.hostname.substring(location.hostname.indexOf("."))+";max-age=31536000;SameSite=Strict;",window)&&"object"==typeof window.localStorage&&window.localStorage.setItem("_ait",uuid)}function TTM(datafile){var ABintance=Object.create(proto);ABintance.datafile=datafile||null;try{if("object"==typeof datafile&&0===Object.getOwnPropertyNames(datafile).length||"object"!=typeof datafile)throw new Error("Master datafile empty or not an object");return ABintance}catch(err){return isLoggingEnabled&&console.log("error:ttm:error:"+ABintance.version+":TTM:error bucketing user in a test"+err),null}}var isLoggingEnabled=!!(window&&window.location&&window.location.search&&/debug=|qa=|ait=([\w%]+)/i.test(window.location.search)||document&&document.cookie&&/_?ait_?(debug|qa|dev)/i.test(document.cookie)||window&&window.localStorage&&window.localStorage.getItem&&(window.localStorage.getItem("ait_qa")||window.localStorage.getItem("ait_debug")||window.localStorage.getItem("ait_dev"))),proto={version:"1.3.20230914",isTrafficDistNorm:function checkTrafficDistNorm(tdist){try{for(var total=0,i=0;i<tdist.length;i++)total+=tdist[i];return 1===parseInt(parseInt(10*total)/10)}catch(err){return isLoggingEnabled&&console.error("error:ttm:error:isTrafficDistNorm:"+this.version+":can't check traffic dist: "+JSON.stringify(err)),!1}},hash:function hash(uid){var i,origString,hash=0,strLen=uid&&uid.length;if(0!==uid.length)for(strLen<36&&(uid+=new Array(36-strLen+1).join(".")),origString="function"==typeof TextEncoder?(new TextEncoder).encode(uid):uid,i=0;i<origString.length;i++)hash=(hash<<2)-hash+("function"==typeof TextEncoder?origString[i]:origString.charCodeAt(i)),hash|=0;return hash},bucket:function(UUID,numberOfVariants,trafficDistribution){try{for(var tmp,hash=this.hash(UUID),divider=1e3*numberOfVariants,draw=hash%divider/divider,accu=trafficDistribution[0],j=0;j<numberOfVariants;j++)if(0===j){if(j<=draw&&draw<accu||draw<=j&&-accu<draw)return 0}else{if(tmp=accu,accu+=trafficDistribution[j],(tmp<=draw&&draw<accu||draw<=-tmp&&-accu<draw)&&j<trafficDistribution.length-1)return j;if((tmp<=draw&&draw<=accu||draw<=-tmp&&-accu<=draw)&&j===trafficDistribution.length-1)return j}}catch(err){return isLoggingEnabled&&console.error("error:ttm:error:bucket:"+this.version+":can't bucket user: "+JSON.stringify(err)),-1}},throttle:function throttle(uid){uid=this.hash(uid);return 1+Math.abs(uid%100)},AB:function(userID,testName,userAttributes){try{var numberOfVariants,trafficDist,test=null,allTestsData=this.datafile,_this=this;if("string"!=typeof userID)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":userID is not a string"),new Error("ttm:error:userID should be a string.");if(0===userID.length)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":userID is empty string"),new Error("ttm:error:userID can't be an empty string.");if("undefined"==userID)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":userID is undefined string"),new Error("ttm:error:userID can't be an equal to undefined.");if("string"!=typeof testName)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":tesname not a string"),new Error("ttm:error:testName should be a string.");if(0===testName.length)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":tesname is empty string"),new Error("ttm:error:testName can't be an empty string.");for(var i=0;i<allTestsData.experiments.length;i++)if(allTestsData.experiments[i].name===testName){test=allTestsData.experiments[i];break}if(null==test)return isLoggingEnabled&&console.error("error:ttm:warning:"+_this.version+":no test matching"),"";if(!test.cdate||"string"!=typeof test.cdate||!test.cdate.length)return isLoggingEnabled&&console.error("error:ttm:warning:"+_this.version+":creation data key missing, empty string or not a string"),"";if(numberOfVariants="object"==typeof test.variations?test.variations.length:0,trafficDist=test.trafficDistribution,"number"!=typeof test.throttle||0===test.throttle)return isLoggingEnabled&&console.error("error:ttm:warning:"+_this.version+":throttle is 0 or NaN"),"";if(test.throttle<100&&_this.throttle(userID+test.cdate)>test.throttle)return isLoggingEnabled&&console.error("error:ttm:warning:"+_this.version+":user do not pass throttle requirements"),"";if("object"==typeof userAttributes&&(userAttributes.bucket=_this.throttle(userID),userAttributes._ua=userAttributes._ua||navigator&&"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent||"bot"),"number"!=typeof numberOfVariants)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":numberOfVariants is NaN"),new Error("numberOfVariants should  be an integer. Check test data.");if(0===numberOfVariants)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":numberOfVariants is 0"),new Error("numberOfVariants should not be 0. Check test data.");if(!trafficDist||"object"!=typeof trafficDist||!trafficDist.length)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":trafficDist for "+testName+" is not defined, an array or is empty"),new Error("trafficDist for "+testName+" must be set, be an array or numbers[float].");if(numberOfVariants!=trafficDist.length)throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":numberOfVariants do not match trafficDist length"),new Error("numberOfVariants should match the traffic dist length.");if(_this.isTrafficDistNorm(trafficDist))return test.variations[_this.bucket(userID+test.cdate,numberOfVariants,trafficDist)].name;throw isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":trafficDist for "+testName+" is not correct"),new Error("trafficDist sum for "+testName+" of all entries must be 1.")}catch(err){return isLoggingEnabled&&console.error("error:ttm:error:"+_this.version+":AB:error bucketing user in a test:"+err),""}}},datafile={experiments:[{name:"ait00x",cdate:"20230921",trafficDistribution:[.333,.333,.334],variations:[{name:"a",variables:[]},{name:"b",variables:[]},{name:"c",variables:[]}],throttle:100}]},rollouts=[],aitVariants=[],variants={},uuid="",errors=[];!function testRollouts(rollouts,userID,ab,variants,aitVariants,userAttributes){var missingUAorLS="object"!=typeof window.localStorage||"object"!=typeof navigator&&"string"!=typeof navigator.userAgent;missingUAorLS?(console.error("Missing localStorage permissions or missing userAgent"),errors.push({fatal:1,description:"Missing localStorage permissions or missing userAgent"})):rollouts.length&&!missingUAorLS&&(uuid=userID,"string"==typeof(uuid="string"==typeof(uuid="object"==typeof window.localStorage&&window.localStorage.getItem("_ait")?window.localStorage.getItem("_ait"):/UUID=((\w+-?)+)/i.test(document.cookie)&&!/_ait=((\w+-?)+)/i.test(document.cookie)&&document.cookie.match(/UUID=((\w+-?)+)/i)[1]&&36==document.cookie.match(/UUID=((\w+-?)+)/i)[1].length?document.cookie.match(/UUID=((\w+-?)+)/i)[1]:/_ait=((\w+-?)+)/i.test(document.cookie)?document.cookie.match(/_ait=((\w+-?)+)/i)[1]:generateUUID())&&uuid.length&&36==uuid.length?uuid:generateUUID())&&uuid.length&&storeUUID(uuid),rollouts.map(function(rollout){var tmpVariant;rollout&&((tmpVariant=function rolloutFromCookie(rolloutName){return!!rolloutName&&!!(rolloutName=new RegExp(rolloutName+"=(\\w)","i")).test(document.cookie)&&document.cookie.match(rolloutName)[1]}(rollout))?(variants[rollout]=tmpVariant,aitVariants.push(rollout+"-"+tmpVariant)):(ab[rollout]=new TTM(datafile),variants[rollout]=ab[rollout].AB(uuid,rollout,userAttributes),variants[rollout]&&aitVariants.push(rollout+"-"+variants[rollout])))}),window._ait=window._ait||{},window._ait.rollouts=variants)}(rollouts,uuid,{},variants,aitVariants,{});var path="https://www.tesco.com/data-assets",env="prod",app="/GHS-MFE",prop75="14",files={experience:{default:["/aa-mfe.js?2024-02-20T11:57:28.184Z","/exp/ga4.js?2024-02-19T10:09:36.112Z"],UK:["/mrktScr/gaPvEnhancedEcomUKIE.js?2024-01-24T16:10:29.311Z","/mrktScr/decibelInsight/decibelInsightUK.js?2024-01-25T13:35:57.262Z","/mrktScr/doubleClickFloodlightUK.js?2024-01-24T16:10:23.894Z?"],IE:["/mrktScr/gaPvEnhancedEcomUKIE.js?2024-01-24T16:10:29.311Z"],SK:["/mrktScr/uaCE.js?2024-01-24T16:10:42.148Z"],CZ:["/mrktScr/uaCE.js?2024-01-24T16:10:42.148Z"],HU:["/mrktScr/uaCE.js?2024-01-24T16:10:42.148Z"]},expFalse:{default:["/expFalse-mfe.js?2024-02-20T11:57:28.184Z","/exp/ga4.js?2024-02-19T10:09:36.112Z"],UK:["/mrktScr/doubleClickFloodlightUK.js?2024-01-24T16:10:23.894Z?"],IE:["/mrktScr/doubleClickFloodlightIE.js?2024-01-24T16:10:22.543Z"],HU:["/mrktScr/doubleClickFloodLightHU.js?2024-01-24T16:10:20.907Z"]},marketing:{UK:["/mrktScr/facebookPixels.js?2024-01-31T15:55:56.548Z","/mrktScr/bingUET.js?2024-01-24T16:10:19.346Z","/mrktScr/movableInkUKIE.js?2024-01-24T16:10:38.148Z","/mrktScr/tradeDeskPixel.js?2024-01-24T16:10:40.726Z","/mrktScr/quantcast.js?2024-02-20T11:44:31.589Z"],IE:["/mrktScr/facebookPixels.js?2024-01-31T15:55:56.548Z","/mrktScr/movableInkUKIE.js?2024-01-24T16:10:38.148Z"],SK:["/mrktScr/appnexus.js?2024-01-24T16:10:16.884Z","/mrktScr/facebookPixels.js?2024-01-31T15:55:56.548Z"],CZ:["/mrktScr/appnexus.js?2024-01-24T16:10:16.884Z","/mrktScr/facebookPixels.js?2024-01-31T15:55:56.548Z","/mrktScr/seznam.js?2024-01-25T13:19:31.189Z"],HU:["/mrktScr/facebookPixels.js?2024-01-31T15:55:56.548Z"]}},finalAssetsArray=[],fVersion="1.1.2024-02-20T11:57:28.918Z";if(window.gtmDataLayer=google_tag_manager&&google_tag_manager["GTM-T6MT4X9"].dataLayer,!window.gtmDataLayer)return setTimeout(mfe,250);var cp=gtmDataLayer.get("cookiePreferences")||{},experience=cp.experience||cp.experienceCookiesEnabled,marketing=cp.advertising||cp.advertisingCookiesEnabled,country=gtmDataLayer.get("country")&&gtmDataLayer.get("country").toUpperCase()||"UK",consentMode=experience&&marketing?"G111":!experience&&marketing?"G110":experience&&!marketing?"G101":"G100";rollouts.length&&gtmDataLayer.set("rollouts",gtmDataLayer.get("rollouts")?function mergeObjects(){var res={};if(arguments)for(var i=0;i<arguments.length;i++)for(var attr in arguments[i])res[attr]!=arguments[i][attr]&&(res[attr]=arguments[i][attr]);return res}(gtmDataLayer.get("rollouts"),variants):variants);try{!function checkParams(){var branch,decoded;/ait/.test(location.search)&&(branch="",decoded=location.search.match(/ait=([\w%]+)/)[1])&&decoded.length&&(branch=(decoded=decoded&&JSON.parse(atob(decodeURIComponent(decoded)))).b&&decoded.b.trim(),(new Date).getTime()>parseInt(decoded.e)||/prod|release-(\w+)/i.test(branch)&&(sessionStorage&&sessionStorage.setItem("p_e",branch),env=branch))}()}catch(e){cp=gtmDataLayer.get("errors")||{};cp.launcher=cp.launcher||{},cp.launcher.eMesssage=cp.launcher.eMesssage?cp.launcher.eMesssage+"|"+e:e,gtmDataLayer.set("errors",cp)}function fileRunner(){marketing&&(finalAssetsArray=finalAssetsArray.concat(files.marketing[country]||[])),function insertAsset(assetsArray,i){function cb(i){assetsArray[i+=1]?insertAsset(assetsArray,i):(window.addEventListener("pageLoad",function(){experience&&aitVariants.length&&"function"==typeof nativeTrack?nativeTrack(aitVariants.join(","),prop75,sendImagePixel):aitVariants.length&&"function"==typeof sendImagePixel&&sendImagePixel("c50="+aitVariants.join(","),window.s||{},prop75)}),window.addEventListener("gtagConfigSet",function(){aitVariants.length&&"function"==typeof callGA4&&callGA4(aitVariants.join(","),app.substring(1),uuid,consentMode,fVersion),errors.length&&"function"==typeof sendErrors&&sendErrors(errors,app.substring(1),uuid,consentMode,fVersion)}))}var scr;i=i||0,assetsArray.length&&((scr=document.createElement("script")).onerror=cb.bind(null,i),scr.setAttribute("async",""),scr.src=path+"/"+env+app+assetsArray[i],document&&document.body&&document.body.appendChild(scr),cb(i))}(finalAssetsArray=experience?finalAssetsArray.concat(files.experience[country]||[],files.experience.default):finalAssetsArray.concat(files.expFalse[country]||[],files.expFalse.default),0)}env=sessionStorage&&sessionStorage.getItem("p_e")?sessionStorage.getItem("p_e"):/ait_env=([\w-]+)/i.test(document.cookie)&&document.cookie.match(/ait_env=([\w-]+)/i)[1]?"release-"+document.cookie.match(/ait_env=([\w-]+)/i)[1]:env||"prod",sessionStorage&&sessionStorage.getItem("p_e")&&console.table({log:"Launcher Log",bertie:window.bertie}),window.bertie?fileRunner():window.addEventListener("bertieLoaded",fileRunner)}();
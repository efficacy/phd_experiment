!function(){function gaPvEnhancedEcomUKIE(){var landingReferrer,px_query,px_userId,px_custom_dimension_obj,px_isAppUser,px_fTS,loyaltyType,productDId,i,px_amendMode,r,UUID,country=gtmDataLayer.get("country")||gtmDataLayer.get("platformData.country");/UK|IE/i.test(country)&&/^\/groceries\/.*/.test(location.pathname)&&(px_amendMode=gtmDataLayer.get("customerData.amendMode"),landingReferrer=gtmDataLayer.get("pageData.busPreservedReferrer"),px_amendMode="amend"==px_amendMode?"true":"false",px_isAppUser=gtmDataLayer.get("dLPlatformFuncs").appVisitorId()||gtmDataLayer.get("dLPlatformFuncs").appConsumerAA().match(/webview|app/i)?"Y":"N",px_query=(px_query=(px_query=document.location.search.length?"&"+document.location.search.substring(1):"").length?"?"+px_query.replace(/&[^&@]+@[^&]+/g,"").substring(1):"").length<=1?"":px_query,px_userId=gtmDataLayer.get("customerData.UUID"),px_fTS="placeholder",loyaltyType=gtmDataLayer.get("customerData.customerLoyaltyType"),UUID=gtmDataLayer.get("customerData.UUID"),px_fTS="first-time"==loyaltyType?"Y":"first-time"!=loyaltyType&&null!=loyaltyType?"N":"",loyaltyType=_gtm.getCookie("_ga"),(px_custom_dimension_obj={dimension4:"GHS"}).dimension26=px_amendMode,px_custom_dimension_obj.dimension27=px_isAppUser,void 0!==px_userId&&""!=px_userId&&(px_custom_dimension_obj.dimension1=px_userId),void 0!==px_fTS&&px_fTS&&(px_custom_dimension_obj.dimension2=px_fTS),void 0!==loyaltyType&&""!=loyaltyType&&(px_custom_dimension_obj.dimension7=loyaltyType),px_custom_dimension_obj.dimension8=1,void 0!==UUID&&""!=UUID&&(px_custom_dimension_obj.dimension23=UUID),px_amendMode=window.location.pathname,px_isAppUser=/^\/groceries\/([a-zA-Z]{2})-([a-zA-Z]{2})\/products\/.*/.test(px_amendMode),px_fTS="",loyaltyType=/prod|prd/i.test(gtmDataLayer.get("env")),document.getElementById("_gtmGApv")||(i=window,UUID=document,px_amendMode="script",r="ga",i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=+new Date,r=UUID.createElement(px_amendMode),UUID=UUID.getElementsByTagName(px_amendMode)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",r.id="_gtmGApv",UUID.parentNode.insertBefore(r,UUID)),"UK"===country?px_fTS=loyaltyType?"UA-17489144-30":"UA-17489144-31":country.match(/IE/i)&&(px_fTS=loyaltyType?"UA-21620952-3":"UA-21620952-4"),ga("create",px_fTS,"auto","ukLego"),ga("ukLego.require","displayfeatures"),ga("ukLego.require","adfeatures"),ga("ukLego.require","linker"),ga("ukLego.linker:autoLink",["tesco.com","tescoliving.com","clothingattesco.com"],!1,!0),landingReferrer&&ga("ukLego.set","referrer",landingReferrer),ga("ukLego.set","userId",px_userId),ga("ukLego.require","ec"),1==px_isAppUser&&(px_amendMode=gtmDataLayer.get("pageData.pageTitle"),r=gtmDataLayer.get("pageData.superDepartment")+"/"+gtmDataLayer.get("pageData.department")+"/"+gtmDataLayer.get("pageData.aisle"),gtmDataLayer.get("renderedContentOp.gaPdpProdId")&&(productDId=gtmDataLayer.get("renderedContentOp.gaPdpProdId")),ga("ukLego.ec:addProduct",{id:productDId,name:px_amendMode,category:r}),ga("ukLego.ec:setAction","detail")),Object.size=function(obj){var key,size=0;for(key in obj)obj[key]&&size++;return size},UUID=document.location.pathname+px_query,ga("ukLego.set","page",UUID),Object.size(px_custom_dimension_obj)?ga("ukLego.send","pageview",px_custom_dimension_obj):ga("ukLego.send","pageview")),_gtm.notify("GTM: GA Enhanced Ecommerce GHS fired")}gtmDataLayer.get("pageLoad")&&gaPvEnhancedEcomUKIE(),document.addEventListener("pageLoad",gaPvEnhancedEcomUKIE)}();